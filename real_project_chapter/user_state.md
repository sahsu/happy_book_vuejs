# 登陸狀態的保持

如何判斷當前用戶是否登錄呢？

對於經典的web開發（後臺開發）， 都是使用當前用戶的session。 把登錄信息保存進去，每次需要的時候讀取就可以了。

對於前端，從理論上講有兩種方式：

1. 讀取cookie  （適合所有h5框架)
2. 讀取vuex    （適合Vuejs)

下面我們分別來說一下。

## 簡單版： 使用cookie

cookie是明文存儲。 可以直接調用 `document.cookie` 來實現。 例如， 打開瀏覽器的console, 

輸入：

document.cookie

返回： 
```
"TY_SESSION_ID=fad74371-40d1-444b-9d1c-5dd33c086b20; uuid_tt_dd=10_37220323210-1535781572649-914811; dc_session_id=10_1535781572649.670168; Hm_lvt_6bcd52f51e9b3dce32bec4a3997715ac=1535781569,1535873915; dc_tos=pef3wv; Hm_lpvt_6bcd52f51e9b3dce32bec4a3997715ac=1535873935"
```

裏面有哪些內容一目瞭然。 

所以，從安全性的角度講，用戶的登錄信息容易被人弄走。 

## 使用Vuex

Vuex 雖然不好上手，但是一旦熟悉了它的寫法，還是很容易的。 工作量兩者差不多。 

另外， Vuex的存儲雖然是使用了Cookie , 但是會對很多信息進行封裝和作用域的判斷。 就算被人拿到, 也不會輕易的泄露信息。 

保存信息：

```
store.dispatch(SET_BASEINFO, this.user_info)
```

讀取信息：

```
store.state.userInfo
```

對於Vuex的代碼細節， 請看前一節 .

## 移動端的H5要保存哪些信息？

1. 保存的越少越好。 一個唯一的用戶標識就好了。
2. 不要泄露數據庫的情況。 

差的例子：

'xiao_wang_user_id'， 這個不用猜， 被人一讀， 就會大概估計到，是小王的用戶id
'140', 嗯。 好的。 當前用戶在數據庫中的id是140 。 下一個用戶肯定是141號了。 

好的例子： 

'a1b2c3d4e5f6' ， 微信的open_id 就是這樣的。 不給黑客任何機會。


